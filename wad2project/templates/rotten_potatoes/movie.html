{% extends 'rotten_potatoes/base.html' %}
{% load staticfiles %}

{% block title_block %}
	{{ movie.name }}
{% endblock %}

{% block body_block %}

	<div class="container my-5">
		<div class="row">
			<div class="col-4">
				<p class="display-6 text-center">{{ movie.name }}</p>
				<img src="{{ MEDIA_URL }}{{ movie.cover }}" class="img-fluid rounded" alt="Movie cover">
			</div>
			<div class="col-8">
				<div class="row">
					<div class="col align-self-end">
						<p class="display-6">Movie Description</p>
					</div>
					<div class="col">
						<p>Rating: {{ movie.avg_rating }}</p>
						<p>Number of Ratings: {{ movie.num_of_ratings }}</p>
					</div>
				</div>
				<div class="row mt-5">
					<div class="col">
						<p class="border border-dark border-3 rounded p-3">{{movie.description}}</p>
					</div>
				</div>
			</div>
		</div>
		<div class="row mt-4">
			<div class="col-6">
				<ul class="ps-0" style="list-style-type: None;">
					<li class="my-1">Release Date: {{ movie.release_date }}</li>
					<li class="my-1">Actors: {{ movie.actors }}</li>
					<li class="my-1">Genre: {{ movie.genre }}</li>
					<li class="my-1">Uploaded: {{ movie.upload_date }}</li>
				</ul>
			</div>
			<div class="col-6">
				<div class="row">
					<p class="display-6">Comments</p>
				</div>
				<div class="row border border-dark border-3 rounded">
					<!-- <p class="border border-dark border-3 rounded p-3">{{movie.description}}</p> -->
					{% if comments %}
						<ul class="p-0 mb-0">
						{% for c in comments %}
							<li class="border-top border-2 border-dark ps-1 d-flex"><p class="mb-0"><b>{{ c.user }}:</b>  {{ c.text }}</p><span class="ms-auto me-1" onclick="alert({{c.id}})">X</span></li>
						{% endfor %}
						</ul>
					{% endif %}
				</div>
				<div class="row d-flex justify-content-end">
					<a class="col-3 border-end border-3 border-dark text-center" href="{% url 'rotten_potatoes:rate_movie' movie.slug %}">Rate This Movie</a>
					<a class="col-3 text-center" href="{% url 'rotten_potatoes:add_comment' movie.slug %}">Add Comment</a>
					{% if movie.producer.user == user %}
					<a class="col-1 border-start border-end border-3 border-dark text-center" href="{% url 'rotten_potatoes:edit_movie' movie.slug %}">Edit</a>
					{% endif %}
				</div>
			</div>
		</div>
	</div>

{% endblock %}
